<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Demo ‚Äî Broken Authentication (simulada)</title>
  <style>
    :root{--bg:#f6f9fc;--card:#ffffff;--accent:#ef4444;--muted:#475569}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Arial;background:var(--bg);color:#0f172a;padding:22px}
    .container{max-width:980px;margin:0 auto}
    .card{background:var(--card);padding:20px;border-radius:12px;box-shadow:0 8px 26px rgba(2,6,23,0.06)}
    h1{margin:0;color:var(--accent);font-size:20px}
    p.lead{margin:6px 0 0;color:var(--muted)}
    label{display:block;margin-top:10px;color:#334155;font-weight:600}
    input{width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef6;margin-top:6px;font:inherit}
    .row{display:flex;gap:10px;margin-top:12px}
    button{padding:10px 12px;border-radius:8px;border:none;cursor:pointer;font-weight:600}
    button.primary{background:var(--accent);color:white}
    button.ghost{background:transparent;border:1px solid #e6eef6}
    .result{margin-top:14px;padding:12px;border-radius:8px;background:#fbfdff;border:1px solid #eef6fb}
    .danger{background:#fff1f2;border-left:4px solid #ef4444;padding:10px;border-radius:6px;color:#7f1d1d}
    .ok{background:#ecfdf5;border-left:4px solid #10b981;padding:10px;border-radius:6px;color:#065f46}
    details{margin-top:12px}
  </style>
</head>
<body>
  <div class="container">
    <div class="card" role="article" aria-labelledby="title">
      <h1 id="title">Simulaci√≥n: Broken Authentication</h1>
      <p class="lead">Objetivo: identificar malas pr√°cticas en autenticaci√≥n y aprender mitigaciones.</p>

      <label for="user">Usuario</label>
      <input id="user" type="text" value="admin" autocomplete="off">

      <label for="pass">Contrase√±a</label>
      <input id="pass" type="password" value="admin123" autocomplete="off">

      <div class="row">
        <button id="login" class="primary">Iniciar sesi√≥n (simulado)</button>
        <button id="toggle" class="ghost">Mostrar contrase√±a</button>
        <button id="vuln" class="ghost">Activar malas pr√°cticas (simulado)</button>
      </div>

      <div id="out" class="result" aria-live="polite"></div>

      <details>
        <summary>Explicaci√≥n y mitigaciones</summary>
        <ul>
          <li>No mostrar ni almacenar contrase√±as en texto plano; en servidor use hashing (bcrypt, Argon2).</li>
          <li>Implementar multifactor (MFA), pol√≠ticas de expiraci√≥n de sesi√≥n y bloqueo por intentos fallidos.</li>
          <li>Evitar exponer informaci√≥n sensible en respuestas y registros.</li>
        </ul>
      </details>

    </div>
  </div>

  <script>
    (function(){
      const login = document.getElementById('login');
      const toggle = document.getElementById('toggle');
      const vuln = document.getElementById('vuln');
      const out = document.getElementById('out');
      const user = document.getElementById('user');
      const pass = document.getElementById('pass');
      let modeVuln = false;

      // Toggle visibilidad de contrase√±a
      toggle.addEventListener('click', ()=>{
        pass.type = pass.type === 'password' ? 'text' : 'password';
        toggle.textContent = pass.type === 'password' ? 'Mostrar contrase√±a' : 'Ocultar contrase√±a';
      });

      // Activar modo malas pr√°cticas (simulado)
      vuln.addEventListener('click', ()=>{
        modeVuln = !modeVuln;
        vuln.textContent = modeVuln ? 'Modo malas pr√°cticas: activado' : 'Activar malas pr√°cticas (simulado)';
        out.innerHTML = modeVuln ? '<div class="danger">‚ö†Ô∏è Modo vulnerable activado: la demo mostrar√° malas pr√°cticas como contrase√±as visibles y mensajes verborreicos.</div>' : '<div class="ok">üîí Modo seguro: buenas pr√°cticas recomendadas.</div>';
      });

      // Simulaci√≥n de inicio de sesi√≥n
      login.addEventListener('click', ()=>{
        const u = user.value.trim();
        const p = pass.value;
        if(modeVuln){
          // En modo vulnerable mostramos informaci√≥n que NUNCA deber√≠a mostrarse
          out.innerHTML = `<div class="danger">üîì Inicio de sesi√≥n simulado (malas pr√°cticas). Usuario: <strong>${u}</strong>. Contrase√±a: <strong>${p}</strong>.</div>`;
          return;
        }

        // Modo seguro: validaciones locales simuladas
        if(p.length < 8){
          out.innerHTML = '<div class="danger">‚ùó Contrase√±a demasiado corta. Aplicar pol√≠ticas de complejidad y usar MFA.</div>';
          return;
        }

        // Simulaci√≥n de √©xito
        out.innerHTML = '<div class="ok">‚úÖ Credenciales simuladas aceptadas. En producci√≥n: aplicar hashing, MFA y protecci√≥n contra fuerza bruta.</div>';
      });

    })();
  </script>
</body>
</html>
